

    <!DOCTYPE html>
    <html lang="en">
    <head>
        <link rel="icon" type="image/png" href="favicon.png">
        <link rel="stylesheet" type="text/css" href="/static/styles.css">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="/static/modal.css">
        <title>User Records</title>
        <style>

             .delete-button {
              background: none;
               border: none;
              color: red;
              font-size: 24px;
               cursor: pointer;
              margin-top: 10px;
            }

            label {
                display: block;
                margin-bottom: 5px;
                color: #333;
            }
          
            .table-container {
                width: 100%;
                max-width: 1000px; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —à–∏—Ä–∏–Ω—É —Ç–∞–±–ª–∏—Ü—ã */
                margin: 0 auto; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Ç–∞–±–ª–∏—Ü—É */
                padding: 0; /* –û—Ç—Å—Ç—É–ø –≤–æ–∫—Ä—É–≥ —Ç–∞–±–ª–∏—Ü—ã */
            }

            table {
                width: 100%;
                border-collapse: collapse; /* –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã */
                font-size: 14px; /* –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏ */
                margin-top: 15px;
            }

            th, td {
                border: 1px solid #ddd; /* –¶–≤–µ—Ç –≥—Ä–∞–Ω–∏—Ü */
                padding: 8px; /* –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —á—Ç–µ–Ω–∏—è */
                text-align: left;
            }

            th {
                background-color: #f2f2f2;
                font-weight: bold;
                font-size: 16px; /* –ù–µ–º–Ω–æ–≥–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ */
            }

            tr:nth-child(even) {
                background-color: #f9f9f9; /* –õ—ë–≥–∫–∏–π —Ñ–æ–Ω –¥–ª—è —á—ë—Ç–Ω—ã—Ö —Å—Ç—Ä–æ–∫ */
            }

            tr:hover {
                background-color: #f1f1f1; /* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å—Ç—Ä–æ–∫–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
                cursor: pointer; /* –£–∫–∞–∑–∞—Ç–µ–ª—å –≤ –≤–∏–¥–µ —Ä—É–∫–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
            }

            /* –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —à–∏—Ä–∏–Ω—É —Å—Ç–æ–ª–±—Ü–æ–≤ */
            th:nth-child(1), td:nth-child(1) { width: 8%; }
            th:nth-child(2), td:nth-child(2) { width: 8%; }
            th:nth-child(3), td:nth-child(3) { width: 25%; }
            th:nth-child(4), td:nth-child(4) { width: 25%; }
            th:nth-child(5), td:nth-child(5) { width: 34%; }

            /* –î–µ–ª–∞–µ–º —Ç–∞–±–ª–∏—Ü—É –≤–∏–∑—É–∞–ª—å–Ω–æ –≤—ã—à–µ */
            tbody td {
                height: 20px; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –≤—ã—Å–æ—Ç—É —Å—Ç—Ä–æ–∫ */
                vertical-align: middle; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
            }
            /* –°—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ */
            .progress-bar {
              height: 5px;
              width: 0;
              margin-top: 5px;
              border-radius: 2px;
              transition: width 0.3s, background-color 0.3s;
            }

            .progress-bar.weak {
                 background-color: red;
                 width: 20%; /* –î–ª–∏–Ω–∞ –¥–ª—è —Å–ª–∞–±–æ–≥–æ –ø–∞—Ä–æ–ª—è */
            }

            .progress-bar.medium {
                 background-color: yellow;
                 width: 60%; /* –î–ª–∏–Ω–∞ –¥–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ –ø–∞—Ä–æ–ª—è */
             }

            .progress-bar.strong {
                 background-color: green;
                 width: 100%; /* –î–ª–∏–Ω–∞ –¥–ª—è —Å–∏–ª—å–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è */
             }
             .icon-text-container {
                 display: flex;
                 align-items: center;
             }

             .favicon {
                width: 12px; /* –®–∏—Ä–∏–Ω–∞ –∏–∫–æ–Ω–∫–∏ */
                height: 12px; /* –í—ã—Å–æ—Ç–∞ –∏–∫–æ–Ω–∫–∏ */
                margin-right: 5px; /* –û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –∏–∫–æ–Ω–∫–æ–π –∏ —Ç–µ–∫—Å—Ç–æ–º */
             }


             .checkbox-group {
                display: flex;
                align-items: center;
             }

            .checkbox-group input[type="checkbox"] {
               margin-right: 5px;
             }

            .checkbox-group label {
               margin-right: 15px;
             }

             .recovery-display {
                display: flex;
                flex-direction: column;
                align-items: center;  /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
                justify-content: center;  /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
                text-align: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ */
                margin-top: 15px;
            }

              #recoveryCode {
               width: 100%;
               padding: 5px;
               margin-top: 5px;
               display: none;
              }

     
              #recoveryQRImage {
                max-width: 200px;
                margin-top: 10px;
                display: block; /* –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–µ–¥–µ—Ç —Å–µ–±—è –∫–∞–∫ –±–ª–æ—á–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç */
                margin-left: auto; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
                margin-right: auto; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
              }

              #recoveryCodeDisplay {
               display: none;
              }


              .recovery-options {
                display: flex;
                justify-content: space-between; /* –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ */
                 margin-top: 10px;
               }

             .recovery-btn {
                flex: 1;
                background-color: #007BFF;
                color: white;
                padding: 10px 20px;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                margin: 0 5px; /* –û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
                text-align: center;
              }

                .recovery-btn:hover {
                    background-color: #0056b3;
                }

                            
                /* –°—Ç–∏–ª–∏ –¥–ª—è —Ä–∞–º–∫–∏ –≤–æ–∫—Ä—É–≥ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ø–∞—Ä–æ–ª–µ–π */
                .password-generator {
                    border: 1px solid #ccc;
                    padding: 10px;
                    margin-top: 20px;
                    margin-bottom: 20px;
                    border-radius: 5px;
                }

                /* –£–º–µ–Ω—å—à–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–∞ –¥–ª—è —á–µ–∫–±–æ–∫—Å–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ø–∞—Ä–æ–ª–µ–π */
                .password-generator label {
                    font-size: 0.9em;
                }

                /* –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª—è –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ø–∞—Ä–æ–ª–µ–π" */
                .password-generator h3 {
                    font-size: 1em;
                    margin-bottom: 10px;
                }

                /* –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ */
                .checkbox-group input[type="checkbox"],
                .checkbox-group label {
                    margin-right: 10px;
                }  


        </style>
    </head>
    <body>
        <div class="container" Style=" width: 350px;">
            <button class="link-button" onclick="goBack()" data-translate="back-link-text"><<<–Ω–∞–∑–∞–¥<<<</button>
                <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->              
                    <svg class="icon-button"id="openSettings" width="30" height="30" viewBox="0 0 30 30" 
                        fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_3222_19950)">
                        <path d="M15.0012 21.1588C13.7604 21.1605 12.5452 20.8036 11.5091 20.1309C10.4727 
                        19.4581 9.66087 18.4984 9.17995 17.3705C8.69892 16.2424 8.57175 14.9993 8.81563 
                        13.7993C9.05947 12.5995 9.66249 11.5005 10.5446 10.6399C11.4264 9.77953 12.5476 
                        9.19591 13.765 8.95934C14.9823 8.72279 16.2445 8.84314 17.3929 9.30611C18.5414 
                        9.76915 19.5269 10.5552 20.2221 11.5685C20.9172 12.5816 21.2899 13.7754 21.2902 
                        14.9987L15.0012 21.1588ZM15.0012 21.1588C15.8244 21.1586 16.6399 21.0005 17.4016 
                        20.6928C18.1636 20.385 18.8573 19.9332 19.4426 19.3623C20.0279 18.7913 20.4932 
                        18.1121 20.8107 17.3631C21.128 16.6145 21.2912 15.8114 21.2902 15L15 21.1588C15.0004 
                        21.1588 15.0008 21.1588 15.0012 21.1588ZM25.5573 16.3462C25.5149 16.6648 25.6457 
                        16.9819 25.9004 17.178L29.0134 19.5746L26.064 24.5578L22.328 23.0905C22.038 22.9766 
                        21.7098 23.0208 21.4603 23.2072C20.7244 23.757 19.9175 24.2115 19.06 24.5589C18.7637 
                        24.6789 18.5533 24.9471 18.5072 25.2634L17.9488 29.1H12.0211L11.4627 25.2634C11.4168 
                        24.9478 11.2073 24.6801 10.912 24.5597C10.0541 24.2098 9.24625 23.7547 8.50788 
                        23.2059C8.25851 23.0205 7.93117 22.9769 7.64197 23.0905L3.90596 24.5578L0.956733 
                        19.5751L4.0897 17.1798C4.34593 16.9839 4.47775 16.6659 4.43521 16.3462C4.37581 
                        15.8996 4.34332 15.4502 4.33789 15C4.34332 14.5498 4.37581 14.1004 4.43521 
                        13.6538C4.47775 13.3341 4.34593 13.0161 4.0897 12.8202L0.956734 10.4249L3.90604 
                        5.44203L7.65811 6.90994C7.94781 7.02328 8.27551 6.97897 8.52471 6.79278C9.26059 
                        6.24295 10.0674 5.78847 10.925 5.44113C11.2213 5.32112 11.4317 5.05294 11.4777 
                        4.73659L12.0362 0.900036H17.9789L18.5373 4.73659C18.5832 5.05216 18.7927 5.31986 
                        19.088 5.4403C19.9459 5.79022 20.7537 6.24528 21.4921 6.79411C21.7415 6.97947 
                        22.0688 7.02309 22.358 6.9095L26.094 5.44216L29.0432 10.4248L25.9036 12.8196C25.6468 
                        13.0154 25.5147 13.3338 25.5573 13.6538C25.6167 14.1004 25.6492 14.5498 25.6546 
                        15C25.6492 15.4502 25.6167 15.8996 25.5573 16.3462ZM12.0416 29.2405L12.0416 
                        29.2404L12.0416 29.2405ZM17.9584 0.759136L17.9584 0.759546L17.9584 0.759136ZM11.9027 
                        30H18.0672L11.151 29.3701C11.1765 29.5461 11.2668 29.707 11.4051 29.8229C11.5435 
                        29.9388 11.7203 30.0017 11.9027 30Z"
                        stroke="#5F41B2" 
                        stroke-width="1.8" 
                        stroke-linecap="round" 
                        stroke-linejoin="round"/>
                        </g>
                        <defs>
                        <clipPath id="clip0_3222_19950">
                        <rect width="30" height="30" fill="white"/>
                        </clipPath>
                        </defs>
                    </svg>
                    <h1>–£—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏</h1>
                    <div id="noRecordsMessage" class="empty-state" style="display: flex; align-items: center; justify-content: center; gap: 1px; white-space: normal; color: #7f69bd; font-size: 14px;">
                        <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M50.416 52.4998C63.0723 52.4998 73.3327 42.2394 73.3327 29.5832C73.3327 16.9269 
                            63.0723 6.6665 50.416 6.6665C37.7598 6.6665 27.4993 16.9269 27.4993 29.5832C27.4993 
                            32.0181 27.877 34.3748 28.5801 36.5754L7.57747 57.578C6.99154 58.1639 6.66602 58.9582 
                            6.66602 59.7915V70.2082C6.66602 71.9399 8.05924 73.3332 9.79102 73.3332H20.2077C21.9395 
                            73.3332 23.3327 71.9399 23.3327 70.2082V64.9998H28.541C30.2728 64.9998 31.666 63.6066 
                            31.666 61.8748V56.6665H36.8743C37.7077 56.6665 38.502 56.341 39.0879 55.755L43.4238 
                            51.4191C45.6243 52.1222 47.9811 52.4998 50.416 52.4998ZM55.6243 19.1665C57.0057 19.1665 
                            58.3304 19.7152 59.3072 20.692C60.2839 21.6687 60.8327 22.9935 60.8327 24.3748C60.8327 
                            25.7562 60.2839 27.0809 59.3072 28.0577C58.3304 29.0344 57.0057 29.5832 55.6243 
                            29.5832C54.243 29.5832 52.9183 29.0344 51.9415 28.0577C50.9647 27.0809 50.416 25.7562 
                            50.416 24.3748C50.416 22.9935 50.9647 21.6687 51.9415 20.692C52.9183 19.7152 54.243 
                            19.1665 55.6243 19.1665Z" fill="#D2CAE8"/>
                            </svg>
                            
                        <p>–í—ã –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–∏–ª–∏ –≤–∞—à—É –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å. –ù–∞–∂–º–∏—Ç–µ –≤—ã—à–µ –∫–Ω–æ–ø–∫—É –°–æ–∑–¥–∞—Ç—å, –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏.</p>
                    </div>  
                <button class="plus-button" id="openModal">+ C–û–ó–î–ê–¢–¨ </button>
            <div class="table-container">
                <table id="recordsTable">
                    <thead>
                        <tr>
                           <th> ‚Ññ </th>
                           <th> ‚≠ê </th>
                           <th>–ó–∞–ø–∏—Å—å</th>
                           <th>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</th>
                           <th>–°–∞–π—Ç</th>
                          

                        </tr>
                    </thead>
                    <tbody>
                        <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
                    </tbody>
                </table>
            </div>
        </div>
    
        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏-->
        <div id="myModal" class="modal" style="display: none;">
            <div class="modal-header">
                <h1>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏</h1>
                <div class="modal-buttons">
            <button class="modal-button" data-action="minimize" id="minimizeEditModal">üóï</button>
            <button class="modal-button"data-action="maximize" id="maximizeEditModal">üóñ</button>
            <button class="modal-button close" data-action="close" id="closeEditModal">‚úñ</button>
                </div>
            </div>
            <div class="modal-content">
                <div class="form-container">
                    <form id="createRecordForm">
                        <div class="input-wrapper">
                            <label for="record_name">Record Name</label>
                            <input type="text" name="record_name" placeholder="Record Name" required>
                        </div>
                        <div class="input-wrapper">
                            <label for="website">Website</label>
                            <input type="text" name="website" placeholder="Website" required>
                        </div>
                        <div class="input-wrapper">
                            <label for="username">Username</label>
                            <input type="text" name="username" placeholder="Username" required>
                        </div>
                        <div class="input-wrapper">
                            <label for="password">Password</label>
                            <input type="password" id="generatedPassword" name="password" placeholder="Password" required>
                            <button type="button" id="generatePasswordBtnCreate">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å</button>
                            <span id="togglePasswordGen" style="cursor: pointer;">üëÅÔ∏è</span>
                            <div id="passwordStrength" class="progress-bar"></div>
                        </div>
                        <div class="input-wrapper">
                            <label for="notes">Notes</label>
                            <input type="text" name="notes" placeholder="Notes">
                        </div>
                        <input type="submit" value="Create New Record" class="registration-button">
                    </form>
                </div>
            </div>
        </div>
 <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
<div id="editModal" class="modal" style="display: none;">
    <div class="modal-header">
        <h1>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å—å</h1>
        <div class="modal-buttons">
            <button class="modal-button" data-action="minimize" id="minimizeEditModal">üóï</button>
            <button class="modal-button"data-action="maximize" id="maximizeEditModal">üóñ</button>
            <button class="modal-button close" data-action="close" id="closeEditModal">‚úñ</button>
        </div>
    </div>
    <div class="modal-content">
        <div class="form-container">
            <form id="editRecordForm">
                <div class="input-wrapper">
                    <label for="edit_record_name">Record Name</label>
                    <input type="text" id="edit_record_name" name="record_name" placeholder="Record Name" required>
                </div>
                <div class="input-wrapper">
                    <label for="edit_website">Website</label>
                    <input type="text" id="edit_website" name="website" placeholder="Website" required>
                </div>
                <div class="input-wrapper">
                    <label for="edit_username">Username</label>
                    <input type="text" id="edit_username" name="username" placeholder="Username" required>
                </div>
                <div class="input-wrapper">
                    <label for="edit_password">Password</label>
                    <div class="password-wrapper">
                        <input type="password" id="edit_password" name="password" placeholder="Password" required>
                        <button type="button" id="generatePasswordBtnEdit">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å</button>
                        <span id="togglePassword" class="eye-icon">üëÅÔ∏è</span><br>
                        <div id="passwordStrength" class="progress-bar"></div>
                    </div>
                </div>
                <div class="input-wrapper">
                    <label for="edit_notes">Notes</label>
                    <input type="text" id="edit_notes" name="notes" placeholder="Notes">
                </div>
                <input type="submit" value="Save Changes" class="registration-button">
            </form>
            <button type="button" id="deleteRecordButton" class="delete-button">&#128465;</button> <!-- –ò–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã -->
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
<div id="settingsModal" class="modal" style="display: none;">
    <div class="modal-header">
        <h1>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
        <div class="modal-buttons">
            <button class="modal-button" data-action="minimize" id="minimizeEditModal">üóï</button>
            <button class="modal-button"data-action="maximize" id="maximizeEditModal">üóñ</button>
            <button class="modal-button close" data-action="close" id="closeEditModal">‚úñ</button>
        </div>
    </div>
    <div class="modal-content">
        <!-- –ß–µ–∫–±–æ–∫—Å –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–µ—Å—Ç–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ -->
        <div class="input-wrapper">
            <label for="storageLocation">–•—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤:</label>
            <div class="checkbox-group">
                <input type="checkbox" id="storeOnDevice" name="storageLocation" value="device">
                <label for="storeOnDevice">–ù–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ</label>

                <input type="checkbox" id="storeOnServer" name="storageLocation" value="server">
                <label for="storeOnServer">–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ</label>
            </div>
        </div>

        <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ø–∞—Ä–æ–ª–µ–π -->
        <div class="input-wrapper password-generator">
            <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ø–∞—Ä–æ–ª–µ–π</h3>
            <div class="checkbox-group">
                <!-- –í—ã–±–æ—Ä –¥–ª–∏–Ω—ã –ø–∞—Ä–æ–ª—è -->
                <label for="passwordLength">–î–ª–∏–Ω–∞ –ø–∞—Ä–æ–ª—è:</label>
                <input type="number" id="passwordLength" name="passwordLength" min="8" max="20" step="1" value="8">

                <input type="checkbox" id="includeLowercase" name="passwordOptions" value="lowercase" checked>
                <label for="includeLowercase">–ú–∞–ª–µ–Ω—å–∫–∏–µ –±—É–∫–≤—ã (a-z)</label>

                <input type="checkbox" id="includeUppercase" name="passwordOptions" value="uppercase">
                <label for="includeUppercase">–ë–æ–ª—å—à–∏–µ –±—É–∫–≤—ã (A-Z)</label>

                <input type="checkbox" id="includeNumbers" name="passwordOptions" value="numbers">
                <label for="includeNumbers">–¶–∏—Ñ—Ä—ã (0-9)</label>

                <input type="checkbox" id="includeSymbols" name="passwordOptions" value="symbols">
                <label for="includeSymbols">–°–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã (!@#$%)</label>
            </div>
        </div>

        <!-- –ü–æ–ª–µ –¥–ª—è —Å–º–µ–Ω—ã –ª–æ–≥–∏–Ω–∞ -->
        <div class="input-wrapper">
            <label for="newLogin">–°–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–Ω</label>
            <input type="text" id="newLogin" name="newLogin" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ª–æ–≥–∏–Ω">
        </div>

        <!-- –ü–æ–ª–µ –¥–ª—è —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è -->
        <div class="input-wrapper">
            <label for="newPassword">–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</label>
            <input type="password" id="newPassword" name="newPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å">
        </div>

        <!-- –ü–æ–ª–µ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è -->
        <div class="input-wrapper">
            <label for="confirmPassword">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
            <input type="password" id="confirmPassword" name="confirmPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –ø–æ–≤—Ç–æ—Ä–Ω–æ">
        </div>

        <div class="recovery-options">
            <button id="getRecoveryQR" class="recovery-btn">–ü–æ–ª—É—á–∏—Ç—å QR –∫–æ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è</button>
            <button id="getRecoveryFile" class="recovery-btn">–ü–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è</button>
            <button id="getRecoverySuperPassword" class="recovery-btn">–ü–æ–ª—É—á–∏—Ç—å —Å—É–ø–µ—Ä-–ø–∞—Ä–æ–ª—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è</button>
        </div>

        <!-- –ü–æ–ª–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–¥–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è -->
        <div id="recoveryCodeDisplay" class="recovery-display">
            <label for="recoveryCode">–í–∞—à –∫–æ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:</label>
            <input type="text" id="recoveryCode" readonly>
        </div>

        <!-- –ú–µ—Å—Ç–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è QR –∫–æ–¥–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è -->
        <div id="recoveryQRDisplay" class="recovery-display" style="display: none;">
            <label for="recoveryQR">QR –∫–æ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:</label>
            <img id="recoveryQRImage" alt="QR –∫–æ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è" />
            <button id="downloadQR" class="recovery-btn">–°–∫–∞—á–∞—Ç—å QR –∫–æ–¥</button>
        </div>

        <input type="submit" id="SaveSettingsButton" value="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏" class="registration-button">
    </div>
</div>




           <script src="translation.js"></script>  
           <script src="general_fun.js"></script> 
           <script> function goBack() { window.history.back();  } </script>

           <script>
            // –û—Ç–∫—Ä—ã—Ç–∏–µ –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
            document.getElementById('openSettings').addEventListener('click', function () {
                document.getElementById('settingsModal').style.display = 'block';
            });
    
    
            window.onclick = function (event) {
                if (event.target === document.getElementById('settingsModal')) {
                    document.getElementById('settingsModal').style.display = 'none';
                }
            };
        </script>





        <script>
            document.getElementById('togglePassword').addEventListener('click', function () {
    const passwordField = document.getElementById('edit_password');
    const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
    passwordField.setAttribute('type', type);
    this.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üôà'; // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏
                                                         });


            document.getElementById('togglePasswordGen').addEventListener('click', function() {
    const passwordField = document.getElementById('generatedPassword');
    const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
    passwordField.setAttribute('type', type);
    this.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üôà'; // –ú–µ–Ω—è–µ–º —ç–º–æ–¥–∑–∏
});
   document.addEventListener("DOMContentLoaded", function() {
    makeModalDraggable('settingsModal');
    makeModalDraggable('editModal');
    makeModalDraggable('myModal');

    });
  
     document.addEventListener('DOMContentLoaded', function () {
       

    const passwordInput = document.getElementById('edit_password');
    const progressBar = document.getElementById('passwordStrength');
    const editModal = document.getElementById('editModal');
    const closeEditModalBtn = document.getElementById('closeEditModal');
    const editForm = document.getElementById('editRecordForm');
    let currentRecordId = null;

   





    function updateProgressBar() {
        const password = passwordInput.value;
        const length = password.length;
        let strengthClass = '';

        if (length >= 16 && /[A-Za-z]/.test(password) && /[0-9]/.test(password)) {
            strengthClass = 'strong';
        } else if (length >= 10 && /[A-Za-z]/.test(password) && /[0-9]/.test(password)) {
            strengthClass = 'medium';
        } else if (length > 0 && length < 10 && (/^[A-Za-z]/.test(password) || /[0-9]/.test(password))) {
            strengthClass = 'weak';
        } else {
            strengthClass = 'weak'; // Optional: for an empty or invalid state
        }

        progressBar.className = `progress-bar ${strengthClass}`;
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ –ø—Ä–∏ –≤–≤–æ–¥–µ –ø–∞—Ä–æ–ª—è
    passwordInput.addEventListener('input', updateProgressBar);

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    function openEditModal(record) {
        editForm.elements['record_name'].value = record.record_name;
        editForm.elements['website'].value = record.website;
        editForm.elements['username'].value = record.username;
        editForm.elements['password'].value = record.password;
        editForm.elements['notes'].value = record.notes;
        currentRecordId = record.record_id; // –°–æ—Ö—Ä–∞–Ω—è–µ–º ID –∑–∞–ø–∏—Å–∏

        // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Å —Ç–µ–∫—É—â–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–∞—Ä–æ–ª—è
        updateProgressBar();

        // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        editModal.style.display = 'block';
    }

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    closeEditModalBtn.onclick = () => {
        editModal.style.display = 'none';
    };

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞, –µ—Å–ª–∏ –∫–ª–∏–∫–Ω—É–ª–∏ –≤–Ω–µ –µ–≥–æ
    window.onclick = (event) => {
        if (event.target === editModal) {
            editModal.style.display = 'none';
        }
    };

                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤ –ø–æ —Å—Ç—Ä–æ–∫–∞–º —Ç–∞–±–ª–∏—Ü—ã
                document.getElementById('recordsTable').addEventListener('click', async (event) => {
                const target = event.target;
                const row = target.closest('tr');
                if (!row) return;

                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω–¥–µ–∫—Å –∫–æ–ª–æ–Ω–∫–∏ –∏ ID –∑–∞–ø–∏—Å–∏
                const columnIndex = target.closest('td')?.cellIndex;
                const recordId = row.dataset.recordId;

                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –∫–æ–ª–æ–Ω–∫–µ Website
                if (columnIndex === 4 && target.tagName === 'A') {
                    console.log('–ö–ª–∏–∫ –ø–æ —Å—Å—ã–ª–∫–µ Website:', target.href);
                    return; // –í—ã–ø–æ–ª–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ —Å—Å—ã–ª–∫–µ
                }

                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –∫–æ–ª–æ–Ω–∫–µ Notes
                if (columnIndex === 1) {
                    console.log('–ö–ª–∏–∫ –ø–æ –∫–æ–ª–æ–Ω–∫–µ Notes');
                    return; // –í—ã–ø–æ–ª–Ω—è–µ–º —Ç–æ–ª—å–∫–æ —Å–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è Notes
                }

                // –û—Å—Ç–∞–ª—å–Ω—ã–µ –∫–ª–∏–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                if (!recordId) return;

                try {
                    console.log('–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏:', recordId);
                    const response = await fetch(`/api/records/${recordId}`, {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${localStorage.getItem('access_token')}`
                        }
                    });

                    if (!response.ok) {
                        throw new Error('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + response.statusText);
                    }

                    const record = await response.json();
                    console.log('–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏:', record);
                    openEditModal(record); // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–∞–Ω–Ω—ã–º–∏ –∑–∞–ø–∏—Å–∏
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏:', error);
                }
            });


    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è
    document.getElementById('deleteRecordButton').addEventListener('click', async () => {
        if (confirm('Are you sure you want to delete this record?')) {
            try {
                const response = await fetch(`/api/records/${currentRecordId}`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + localStorage.getItem('access_token')
                    }
                });

                if (!response.ok) {
                    throw new Error('Network response was not ok ' + response.statusText);
                }

                alert('Record deleted successfully');
                editModal.style.display = 'none'; // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                loadTableData(); // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü–µ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏
            } catch (error) {
                console.error('There was a problem with the fetch operation:', error);
            }
        }
        checkRecords();
    });

    async function loadTableData() {
        try {
            const response = await fetch('/api/records/all', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer ' + localStorage.getItem('access_token')
                }
            });

            if (!response.ok) {
                throw new Error('Network response was not ok ' + response.statusText);
            }

            const records = await response.json();
            // –õ–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ
            populateTable(records);
        } catch (error) {
            console.error('There was a problem with the fetch operation:', error);
        }
    }

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    document.getElementById('closeEditModal').addEventListener('click', function() {
        document.getElementById('editModal').style.display = 'none';
    });

/*------------------------------------------------------------------------------*/










    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
    editForm.addEventListener('submit', async (event) => {
        event.preventDefault();

        const formData = new FormData(editForm);
        const data = Object.fromEntries(formData.entries());

        console.log('Updating record with ID:', currentRecordId); // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è recordId –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
        console.log('Data to be sent:', data);

        try {
            const response = await fetch(`/api/records/${currentRecordId}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer ' + localStorage.getItem('access_token')
                },
                body: JSON.stringify(data)
            });

            if (!response.ok) {
                const errorMessage = await response.text();
                throw new Error('Network response was not ok: ' + response.statusText + ', ' + errorMessage);
            }

            const updatedRecord = await response.json();
            alert('–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
            editModal.style.display = 'none'; // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            fetchRecords(); // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—É –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π:', error);
            alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π');
        }
    });

      // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   
      fetchSettings();
    // Initial fetch to populate the table
    fetchRecords();
});

          
            // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            const modal = document.getElementById('myModal');
            const openModalBtn = document.getElementById('openModal');
            const closeModalBtn = document.getElementById('closeModal');
    
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            openModalBtn.addEventListener('click', () => {
                modal.style.display = 'block';
            });
   
            async function fetchRecords(skip = 0, limit = 10) {
    console.log('Starting fetchRecords function');

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –≤ URL –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage, –µ—Å–ª–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
    const urlParams = new URLSearchParams(window.location.search);
    const tokenFromUrl = urlParams.get('access_token');
    if (tokenFromUrl) {
        localStorage.setItem('access_token', tokenFromUrl);
    }

    const accessToken = localStorage.getItem('access_token');
    if (!accessToken) {
        console.error('Access token not found');
        return;
    }

    try {
        console.log(`Making GET request to /api/records/all?skip=${skip}&limit=${limit}`);

        // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ URL —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
        const url = `/api/records/all?skip=${skip}&limit=${limit}`;
        const response = await fetch(url, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${accessToken}`,
            },
        });

        if (!response.ok) {
            throw new Error(`Network response was not ok: ${response.status} ${response.statusText}`);
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
        const records = await response.json();
        console.log('Records fetched:', records);

        // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã
        populateTable(records);
    } catch (error) {
        console.error('There was a problem with the fetch operation:', error);
    }
}


function populateTable(records) {
    const tbody = document.querySelector('#recordsTable tbody');
    tbody.innerHTML = ''; // –û—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –ø–µ—Ä–µ–¥ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º

    // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∑–∞–ø–∏—Å–µ–π:
    // - –°–Ω–∞—á–∞–ª–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é `is_favorite` (true = 1, false = 0, –ø–æ—ç—Ç–æ–º—É true –±—É–¥–µ—Ç –≤—ã—à–µ)
    // - –ó–∞—Ç–µ–º –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é `record_id`
    const sortedRecords = records.sort((a, b) => {
        if (b.is_favorite !== a.is_favorite) {
            return b.is_favorite - a.is_favorite; // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ is_favorite
        }
        return a.record_id - b.record_id; // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ record_id
    });

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç—Ä–æ–∫ —Ç–∞–±–ª–∏—Ü—ã –∏–∑ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
    sortedRecords.forEach(record => {
        const row = document.createElement('tr');
        row.dataset.recordId = record.record_id; // –î–æ–±–∞–≤–ª—è–µ–º data-record-id

        const websiteUrl = record.website.startsWith('http') ? record.website : `http://${record.website}`;
        const faviconUrl = `${websiteUrl}/favicon.ico`; // URL –¥–ª—è —Ñ–∞–≤–∏–∫–æ–Ω–∞

        row.innerHTML = `
            <td>${record.record_id}</td>
            <td>
                <div class="favorite-column" data-record-id="${record.record_id}">
                    <span class="star ${record.is_favorite ? 'favorite' : ''}">
                        ${record.is_favorite ? '‚≠ê' : '‚òÜ'}
                    </span>
                </div>
            </td>
            <td>${record.record_name}</td>
            <td>${record.username}</td>
            <td>
                <div class="icon-text-container">
                    <img src="${faviconUrl}" class="favicon" onerror="this.style.display='none'" />
                    <a href="${websiteUrl}" target="_blank" rel="noopener noreferrer">${record.website}</a>
                </div>
            </td>
        `;

        tbody.appendChild(row);
    });


     
    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä–æ–∫
    document.querySelectorAll('.favorite-column').forEach(column => {
        column.addEventListener('click', event => {
            const recordId = column.dataset.recordId;
            const starElement = column.querySelector('.star');
            const currentStatus = starElement.classList.contains('favorite');
            toggleFavorite(recordId, currentStatus);
        });
    });
}

 // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å –±—ç–∫–µ–Ω–¥–∞
    async function fetchSettings() {
    const token = localStorage.getItem('access_token');

      try {
        console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫');
        const response = await fetch('/api/user/get_settings', {
            method: 'GET',
            headers: {
                     'Content-Type': 'application/json',
                    'Authorization': 'Bearer ' + localStorage.getItem('access_token') }
        });

        console.log('–û—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ–ª—É—á–µ–Ω, —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞:', response.status);
        if (!response.ok) {
            throw new Error('Network response was not ok ' + response.statusText);
        }

        const data = await response.json();
        console.log('–ù–∞—Å—Ç—Ä–æ–π–∫–∏, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞:', data);
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ–∫–±–æ–∫—Å–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
        document.getElementById('storeOnDevice').checked = data.local_password_storage;
        document.getElementById('storeOnServer').checked = data.cloud_password_storage;

    } catch (error) { console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error); }
 }

  



// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è QR –∫–æ–¥–∞ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ü–æ–ª—É—á–∏—Ç—å QR –∫–æ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è"

document.getElementById('getRecoveryQR').addEventListener('click', async function() {
    try {
        const response = await fetch('/api/user/get_recovery_qr_code', {
            method: 'GET',
            headers: {
                'Authorization': 'Bearer ' + localStorage.getItem('access_token')
            }
        });

        if (response.ok) {
            const blob = await response.blob(); // –ü–æ–ª—É—á–∞–µ–º –±–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            const qrCodeUrl = URL.createObjectURL(blob); // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π URL

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º src –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è QR-–∫–æ–¥–∞
            document.getElementById('recoveryQRImage').src = qrCodeUrl;

            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –±–ª–æ–∫ —Å QR-–∫–æ–¥–æ–º
            document.getElementById('recoveryQRDisplay').style.display = 'block';

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º URL –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
            document.getElementById('downloadQR').setAttribute('data-url', qrCodeUrl);
        } else {
            console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è QR-–∫–æ–¥–∞');
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞:', error);
    }
});

document.getElementById('getRecoveryFile').addEventListener('click', async function() {
    try {
        const response = await fetch('/api/user/get_recovery_file', {
            method: 'GET',
            headers: {
                'Authorization': `Bearer ${localStorage.getItem('access_token')}`
            }
        });
        if (response.ok) {
            const blob = await response.blob();
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');

            /* –°–∫—Ä—ã—Ç–∏–µ –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
            document.getElementById('recoveryCode').style.display = 'none';
            document.getElementById('recoveryCodeDisplay').style.display = 'none';
            const qrDisplay = document.getElementById("recoveryQRDisplay");
            qrDisplay.style.display = "none";
            /*-------------------------------------------------------*/

            a.href = url;
            a.download = 'recovery_key.bin';
            a.click();
        } else {
            console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è');
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞:', error);
    }
});

document.getElementById('getRecoverySuperPassword').addEventListener('click', async function() {
    try {
        const response = await fetch('/api/user/get_recovery_code', {
            method: 'GET',
            headers: {
                     'Content-Type': 'application/json',
                    'Authorization': 'Bearer ' + localStorage.getItem('access_token') }
        });
        if (response.ok) {
            const data = await response.json();
            
            const qrDisplay = document.getElementById("recoveryQRDisplay");
            qrDisplay.style.display = "none";

          
            document.getElementById('recoveryCode').value = data['users recovery code'];
            document.getElementById('recoveryCode').style.display = 'block';
            document.getElementById('recoveryCodeDisplay').style.display = 'block';
        } else {
            console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—É–ø–µ—Ä –ø–∞—Ä–æ–ª—è');
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞:', error);
    }
});





/*       ------------------------------------------------------  */

document.getElementById('SaveSettingsButton').addEventListener('click', async function() {
    console.log('–ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏" –Ω–∞–∂–∞—Ç–∞');
    // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è —á–µ–∫–±–æ–∫—Å–æ–≤
    const localPasswordStorage = document.getElementById('storeOnDevice').checked;
    const cloudPasswordStorage = document.getElementById('storeOnServer').checked;

    console.log('–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:', { localPasswordStorage, cloudPasswordStorage });

    // –§–æ—Ä–º–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    const settingsData = {
        local_password_storage: localPasswordStorage,
        cloud_password_storage: cloudPasswordStorage
    };

    try {
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        const response = await fetch('/api/user/settings/password_storage', {
            method: 'PATCH',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Bearer ' + localStorage.getItem('access_token')
            },
            body: JSON.stringify(settingsData)
        });

        console.log('–û—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –∑–∞–ø—Ä–æ—Å –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:', response.status);

        if (!response.ok) {
            throw new Error('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + response.statusText);
        }

        const result = await response.json();
        console.log('–°–µ—Ä–≤–µ—Ä —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–∏–ª –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:', result.message);

        // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ —Ç–æ–º, —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
    }
});


/*-------------------------------------------------------------- */
            document.getElementById('createRecordForm').addEventListener('submit', async (event) => {
                event.preventDefault();
                console.log('Form submitted');
    
                const formData = new FormData(event.target);
                const data = Object.fromEntries(formData.entries());
                console.log('Form data:', data);
    
                const urlParams = new URLSearchParams(window.location.search);
                let Item = urlParams.get('access_token');
                localStorage.setItem('access_token', Item);
                console.log(localStorage.getItem(Item));
                console.log(Item);
    
                try {
                    console.log('Making POST request to /api/records with data:', data);
                    const response = await fetch('/api/records/create', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer ' + localStorage.getItem('access_token')
                        },
                        body: JSON.stringify(data)
                    });
    
                    if (!response.ok) {
                        throw new Error('Network response was not ok ' + response.statusText);
                    }
    
                    const newRecord = await response.json();
                    console.log('New record created:', newRecord);
                    fetchRecords(); // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—É –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏
                    event.target.reset(); // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
                    console.log('Form reset');
                } catch (error) {
                    console.error('There was a problem with the fetch operation:', error);
                }
                
            });
    
            // Initial fetch to populate the table
            fetchRecords();
        </script>


        <script>
                 // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –≤—Å–µ—Ö —á–µ–∫–±–æ–∫—Å–æ–≤
             const checkboxes = document.querySelectorAll('input[name="passwordOptions"]');
    
             checkboxes.forEach(checkbox => {
              checkbox.addEventListener('change', function() {
                       // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –≤–∫–ª—é—á—ë–Ω–Ω—ã–µ —á–µ–∫–±–æ–∫—Å—ã
               const checkedCheckboxes = [...checkboxes].filter(checkbox => checkbox.checked);
    
               // –ï—Å–ª–∏ —á–µ–∫–±–æ–∫—Å –±—ã–ª –æ—Ç–∫–ª—é—á–µ–Ω, –∏ —ç—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤–∫–ª—é—á—ë–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç, —Ç–æ –±–ª–æ–∫–∏—Ä—É–µ–º –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ
                    if (checkedCheckboxes.length === 0) {
                        this.checked = true; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ
                        alert('–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã–±—Ä–∞–Ω —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω.');
                    }
                });
              });
        </script>

            <script>
                // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –ø–æ–ª—è –¥–ª–∏–Ω—ã –ø–∞—Ä–æ–ª—è
                const passwordLengthInput = document.getElementById('passwordLength');

                // –ë–ª–æ–∫–∏—Ä—É–µ–º –≤–≤–æ–¥ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
                passwordLengthInput.addEventListener('keydown', function(event) {
                    // –†–∞–∑—Ä–µ—à–∞–µ–º —Ç–æ–ª—å–∫–æ –∫–ª–∞–≤–∏—à–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, —Ç–∞–∫–∏–µ –∫–∞–∫ —Å—Ç—Ä–µ–ª–∫–∏, Tab, Enter
                    if (event.key !== "ArrowUp" && event.key !== "ArrowDown" && event.key !== "Tab" && event.key !== "Enter") {
                        event.preventDefault();
                    }
                });
            </script>


<script>
   // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∞—Ä–æ–ª—è
function generatePassword(event) {
    console.log('–ö–Ω–æ–ø–∫–∞ "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å" –Ω–∞–∂–∞—Ç–∞');
    
    // –ù–∞—Ö–æ–¥–∏–º —Ñ–æ—Ä–º—É –∏ –ø–æ–ª—è –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –≤ –∫–∞–∫–æ–º –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –Ω–∞—Ö–æ–¥–∏–º—Å—è
    let passwordField;
    if (event.target.id === 'generatePasswordBtnCreate') {
        passwordField = document.getElementById('generatedPassword');
    } else if (event.target.id === 'generatePasswordBtnEdit') {
        passwordField = document.getElementById('edit_password');
    }
    
    // –ü–æ–ª—É—á–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∞—Ä–æ–ª—è
    const length = parseInt(document.getElementById('passwordLength')?.value) || 12;
    const includeUppercase = document.getElementById('includeUppercase')?.checked || false;
    const includeLowercase = document.getElementById('includeLowercase')?.checked || false;
    const includeDigits = document.getElementById('includeNumbers')?.checked || false;
    const includeSpecial = document.getElementById('includeSymbols')?.checked || false;

    // –°–æ–±–∏—Ä–∞–µ–º –æ–±—ä–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫
    const settings = {
        length: length,
        include_uppercase: includeUppercase,
        include_lowercase: includeLowercase,
        include_digits: includeDigits,
        include_special: includeSpecial
    };

    console.log('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∞—Ä–æ–ª—è:', settings);

    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º POST-–∑–∞–ø—Ä–æ—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∞—Ä–æ–ª—è
    fetch('/api/password_generator/generate_password/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(settings)
    })
    .then(response => response.json())
    .then(data => {
        if (passwordField) {
            passwordField.value = data.password;
            console.log('–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞');
        }
    })
    .catch(error => {
        console.error('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∞—Ä–æ–ª—è:', error);
    });
}


function toggleFavorite(recordId, currentStatus) {
    const accessToken = localStorage.getItem('access_token');

    if (!recordId) {
        console.error('–û—à–∏–±–∫–∞: ID –∑–∞–ø–∏—Å–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω!');
        return;
    }

    if (!accessToken) {
        console.error('–û—à–∏–±–∫–∞: —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç!');
        return;
    }

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å
    const newStatus = !currentStatus;

    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º PUT-–∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    fetch(`/api/records/make_favorite/${recordId}?is_favorite=${newStatus}`, {
        method: "PUT",
        headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${accessToken}`
        }
    })
    .then(response => {
        if (!response.ok) {
            throw new Error(`–û—à–∏–±–∫–∞: ${response.statusText}`);
        }
        return response.json();
    })
    .then(updatedRecord => {
        console.log('–ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞:', updatedRecord);

        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
        const starElement = document.querySelector(`.favorite-column[data-record-id="${recordId}"] .star`);
        if (starElement) {
            starElement.textContent = updatedRecord.is_favorite ? '‚≠ê' : '‚òÜ';
            starElement.classList.toggle('favorite', updatedRecord.is_favorite);
        }
    })
    .catch(error => {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏:', error);
        alert('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ.');
    });
}

// –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—à–∞—Ç–µ–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å"
document.getElementById('generatePasswordBtnCreate').addEventListener('click', generatePassword);
document.getElementById('generatePasswordBtnEdit').addEventListener('click', generatePassword);

document.addEventListener("DOMContentLoaded", async function () {
    async function fetchRecords(skip = 0, limit = 10) {
        try {
            console.log(`Making GET request to /api/records/all?skip=${skip}&limit=${limit}`);

            const url = `/api/records/all?skip=${skip}&limit=${limit}`;
            const response = await fetch(url, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${localStorage.getItem('access_token')}`,
                },
            });

            if (!response.ok) {
                throw new Error(`Network response was not ok: ${response.status} ${response.statusText}`);
            }

            // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
            const records = await response.json();
            console.log('Records fetched:', records);

            // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã
            checkRecords(records);
            populateTable(records);
        } catch (error) {
            console.error('There was a problem with the fetch operation:', error);
        }
    }

    function checkRecords(records) {
        let recordsTable = document.getElementById("recordsTable");
        let noRecordsMessage = document.getElementById("noRecordsMessage");

        if (records.length === 0) {
            recordsTable.style.display = "none";
            noRecordsMessage.style.display = "block";
        } else {
            recordsTable.style.display = "block";
            noRecordsMessage.style.display = "none";
        }
    }

    // –í—ã–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –∑–∞–ø–∏—Å–µ–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    await fetchRecords();
});


</script>
    </body>
    </html>
    