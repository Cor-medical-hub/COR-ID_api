



<!-- 
Можно сделать по такому принципу, как было с редиректом - после того как мы достали токен на странице login.html или mainscreen.html, мы его добавляем в квери параметр для последующих переходах на другие страницы -->
<!-- </button>
<h3 data-translate="registration">Registration</h3>
<button onclick="window.location.href='/static/signup.html' -> тут новая страница 
+ '?access_token=' + access_token;" -> а тут добавляем квери параметр со старой страницы 
class="registration-button" data-translate="registration-button">Register</button>
<br><button onclick="window.location.href='/static/forgot-password.html' + '?access_token=' + access_token;" class="registration-button"><span data-translate="forgot-password-button">Forgot password?</span></a><br> -->

    <!DOCTYPE html>
    <html lang="en">
    <head>
        <link rel="icon" type="image/png" href="/static/favicon.png">
        <!-- Другие метатеги и ссылки на иконки -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>User Records</title>
        <link rel="stylesheet" type="text/css" href="/static/styles.css">

      
    </head>
    <body>
     <div class="container">
        <button class="link-button" onclick="goBack()" data-translate="back-link-text"><<<назад<<<</button>
        <div class="top-panel">
        <div class="panel">
            <h1>COR-ID</h1>
            <button class="button" id="passwordManagerButton">Password manager</button>
            <button class="button" id="Cor-Id-Button">MY COR-ID</button>
            <button class="button" id="loginButton">COR-Platform</button>
        </div>
        <div id="admin-button-container"></div> <!-- Контейнер для кнопки администратора -->
    </div>
    </div>
    <script src="/static/translation.js"></script>   
    <script> function goBack() { window.history.back();  } </script>
        <script>
           const accessToken = new URLSearchParams(window.location.search).get('access_token');
         //   const accessToken =localStorage.getItem('access_token')
            console.log("accessToken from localStorage:", accessToken);
            document.getElementById('passwordManagerButton').addEventListener('click', function() {
                window.location.href = '/static/password_manager.html' + '?access_token=' + accessToken;
            });
    
            document.getElementById('Cor-Id-Button').addEventListener('click', function() {
                window.location.href = '/static/Cor-Id.html' + '?access_token=' + accessToken;
            });
    
            document.getElementById('loginButton').addEventListener('click', function() {
                window.location.href = '/static/COR.html' + '?access_token=' + accessToken;
            });


            document.addEventListener('DOMContentLoaded', function() {
          const isAdmin = localStorage.getItem('isAdmin'); // Получаем значение из localStorage
          const adminButtonContainer = document.getElementById('admin-button-container'); // Элемент, куда будет добавлена кнопка
              // Логирование значения isAdmin
            console.log("isAdmin from localStorage:", isAdmin); // Логируем значение
            if (isAdmin === 'true') { // Проверяем, является ли пользователь администратором
                const adminButton = document.createElement('button');
                adminButton.innerText = 'Администрирование';
                adminButton.className = 'admin-button'; 
                adminButton.onclick = function() {
                    window.location.href =  `/static/admin.html/?access_token=${accessToken}`// Переход на страницу администрирования
                   
                };
                adminButtonContainer.appendChild(adminButton); // Добавляем кнопку в контейнер
            }
        });
        </script>
    </body>
    </html>
    