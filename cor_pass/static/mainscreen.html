
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <link rel="icon" type="image/png" href="/static/favicon.png">
        <!-- Другие метатеги и ссылки на иконки -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>User Records</title>
        <link rel="stylesheet" type="text/css" href="/static/styles.css">
        <link rel="stylesheet" type="text/css" href="/static/modal.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
      
    </head>
    <body>
     <div class="container">
      <!--  <button class="link-button" onclick="goBack()" data-translate="back-link-text"><<<назад<<<</button>-->
     
        <div class="logo">  
            <svg width="100" height="30" viewBox="0 0 142 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_3177_20583)">
                <path d="M124.549 23.2737H113.901L129.188 45.2791H141.045L131.462 31.4543C136.968 28.8526 140.784 23.2446 140.784 16.7617C140.784 7.8078 133.502 0.522657 124.549 0.522657H102.311V45.2791H112.038V10.2511H124.549C128.141 10.2511 131.06 13.1709 131.06 16.7617C131.06 20.353 128.141 23.2737 124.549 23.2737Z" fill="#ED1064"/>
                <path d="M23.944 36.2649C16.632 36.2649 10.6815 30.3164 10.6797 23.0027L10.6668 22.9964L10.6797 22.9903C10.684 15.6765 16.632 9.72757 23.944 9.72757C27.5765 9.72757 30.8733 11.198 33.2712 13.5723L42.6554 9.6591C38.4829 3.81718 31.652 0 23.944 0C11.2677 0 0.95459 10.3163 0.95459 22.9964C0.95459 35.6767 11.2677 45.9929 23.944 45.9929C31.652 45.9929 38.4829 42.1748 42.6554 36.3334L33.2712 32.4216C30.8733 34.7955 27.5765 36.2649 23.944 36.2649Z" fill="#ED1064"/>
                <path d="M66.0385 15.649H62.954V30.3564H66.0385V15.649Z" fill="#7527B2"/>
                <path d="M79.8081 17.7289C78.4551 16.3422 76.737 15.6489 74.6535 15.6489H69.2758V30.3563H74.6535C76.737 30.3563 78.4551 29.663 79.8081 28.2763C81.1745 26.8756 81.8577 25.1107 81.8577 22.9816C81.8577 20.8525 81.1745 19.1016 79.8081 17.7289ZM77.5555 26.1542C76.7843 26.9806 75.79 27.3938 74.5724 27.3938H72.3603V18.6114H74.5724C75.79 18.6114 76.7843 19.0176 77.5555 19.83C78.3267 20.6424 78.7122 21.6929 78.7122 22.9816C78.7122 24.2703 78.3267 25.3277 77.5555 26.1542Z" fill="#7527B2"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M57.6496 30.1136C56.562 27.9792 55.9488 25.5626 55.9488 23.0027C55.9488 21.056 56.3199 19.2001 56.9681 17.4802L56.9515 17.4756C56.9515 17.4756 57.9286 12.1198 60.9689 8.00596C62.6904 5.67674 63.6183 4.67899 65.1869 3.24857C67.8529 0.8174 69.5436 0.132977 69.6361 0.096452C57.8705 1.10531 48.6337 10.9721 48.6337 23.0027C48.6337 28.9585 50.897 34.3854 54.6101 38.47C54.8796 38.7662 55.3627 38.6444 55.4726 38.2593L57.6884 30.5014C57.7255 30.372 57.7107 30.2335 57.6496 30.1136Z" fill="url(#paint0_linear_3177_20583)"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M73.1888 45.941C74.7854 45.2284 77.2915 43.6953 80.5784 40.3764C82.2496 38.6889 83.6227 36.3438 84.5411 34.095C85.266 32.3199 85.8022 30.332 86.135 28.9211C83.7992 34.6451 78.1863 38.6826 71.6239 38.6826C69.2727 38.6826 67.0425 38.1649 65.0409 37.237C64.9288 37.185 64.802 37.1727 64.6824 37.204L56.5743 39.3293C56.1797 39.4327 56.0521 39.9266 56.3568 40.1975C60.4171 43.8073 65.7646 46 71.6239 46C72.1504 46 72.6711 45.9759 73.1888 45.941Z" fill="url(#paint1_linear_3177_20583)"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M94.6144 23.0026C94.6144 10.3016 84.3213 0.0052998 71.624 0.0052998C70.9538 0.0052998 70.2919 0.0402436 69.6361 0.096452C69.5436 0.132977 67.8529 0.8174 65.1869 3.24857C63.6183 4.67899 62.6904 5.67674 60.9689 8.00596C57.9286 12.1198 56.9515 17.4756 56.9515 17.4756L56.9681 17.4802C59.2033 11.5493 64.913 7.32264 71.624 7.32264C80.2813 7.32264 87.2993 14.3428 87.2993 23.0026C87.2993 25.0981 86.8805 27.0939 86.135 28.9211C85.8021 30.332 84.9478 32.7517 84.0159 34.4274C83.2985 35.7174 82.5374 36.9624 81.7561 38.1017C80.9542 39.2708 80.1311 40.3286 79.312 41.2094C77.1791 43.503 74.7855 45.2283 73.1888 45.941C85.1554 45.1355 94.6144 35.177 94.6144 23.0026Z" fill="url(#paint2_linear_3177_20583)"/>
                </g>
                <defs>
                <linearGradient id="paint0_linear_3177_20583" x1="-12.4711" y1="40.4517" x2="-8.96669" y2="-1.59578" gradientUnits="userSpaceOnUse">
                <stop stop-color="#7527B2"/>
                <stop offset="1" stop-color="#AB77EB"/>
                </linearGradient>
                <linearGradient id="paint1_linear_3177_20583" x1="159.347" y1="17.8436" x2="50.6366" y2="-50.6245" gradientUnits="userSpaceOnUse">
                <stop stop-color="#7527B2"/>
                <stop offset="0.5" stop-color="#904FCF"/>
                <stop offset="1" stop-color="#AB77EB"/>
                </linearGradient>
                <linearGradient id="paint2_linear_3177_20583" x1="69.559" y1="-0.0967435" x2="86.0478" y2="47.3497" gradientUnits="userSpaceOnUse">
                <stop stop-color="#7527B2"/>
                <stop offset="0.5" stop-color="#7B43F2"/>
                <stop offset="1" stop-color="#AB77EB"/>
                </linearGradient>
                <clipPath id="clip0_3177_20583">
                <rect width="140.091" height="46" fill="white" transform="translate(0.95459)"/>
                </clipPath>
                </defs>
                </svg> <br>   
        </div>   
            <br> <h1 style=" margin-top:0; color:#291161;font-size: 18px; "  data-translate="welcome-message">Приветствуем в COR-ID</h1>
            <h4 id="userCorId" class="clickable" style="margin-top:0;margin-bottom:0;">Загрузка...</h4>
            <div id="qrCodeContainer" style="display: none;margin-top: 10px;"></div> 
            <button class="custom-button"id="passwordManagerButton">
                <!-- Первая SVG-иконка -->       
                <svg class="icon-left" width="51" height="50" viewBox="0 0 51 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="0.5" width="50" height="50" rx="25" fill="#7527B2"/>
                    <path d="M28.625 28.75C32.4219 28.75 35.5 25.6719 35.5 21.875C35.5 18.0781 32.4219 15 28.625 15C24.8281 
                    15 21.75 18.0781 21.75 21.875C21.75 22.6055 21.8633 23.3125 22.0742 23.9727L15.7734 30.2734C15.5977 
                    30.4492 15.5 30.6875 15.5 30.9375V34.0625C15.5 34.582 15.918 35 16.4375 35H19.5625C20.082 35 20.5 
                    34.582 20.5 34.0625V32.5H22.0625C22.582 32.5 23 32.082 23 31.5625V30H24.5625C24.8125 30 25.0508 
                    29.9023 25.2266 29.7266L26.5273 28.4258C27.1875 28.6367 27.8945 28.75 28.625 28.75ZM30.1875 
                    18.75C30.6019 18.75 30.9993 18.9146 31.2924 19.2076C31.5854 19.5007 31.75 19.8981 31.75 20.3125C31.75 
                    20.7269 31.5854 21.1243 31.2924 21.4174C30.9993 21.7104 30.6019 21.875 30.1875 21.875C29.7731 21.875 
                    29.3757 21.7104 29.0826 21.4174C28.7896 21.1243 28.625 20.7269 28.625 20.3125C28.625 19.8981 28.7896 
                    19.5007 29.0826 19.2076C29.3757 18.9146 29.7731 18.75 30.1875 18.75Z" fill="white"/>
                </svg>
                    
                <!-- Текст кнопки -->
                <span class="button-text">Пароли</span> 
                <!-- Вторая SVG-иконка -->
                <svg class="icon-right" width="24" height="24" viewBox="0 0 31 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="1.125" y="0.625" width="28.75" height="28.75" rx="14.375" stroke="#7527B2" stroke-width="1.25"/>
                    <path d="M20.1161 14.3274L20.1132 14.3248L14.1478 8.73647L14.1432 8.73226L14.1418 8.7311C13.7749 8.40419 
                    13.2289 8.43324 12.8907 8.76051L12.8866 8.76302L12.8857 8.76387L12.8823 8.76723L12.883 8.76796C12.5174 
                    9.10176 12.5154 9.67494 12.8829 10.0382L12.885 10.0403L12.8862 10.0415L12.8884 10.0435L18.1453 
                    14.996L12.8804 19.956L12.8817 19.9574C12.7001 20.1105 12.6074 20.3496 12.6074 20.5897C12.6074 21.0796 
                    13.0121 21.4995 13.5307 21.4995C13.7755 21.4995 13.9909 21.4093 14.1458 21.2575L14.1494 21.254L20.1144 
                    15.637L20.1176 15.634L20.1415 15.6107L20.151 15.6008L20.1535 15.5982C20.4888 15.233 20.4849 14.6591 
                    20.1161 14.3274Z" fill="#7527B2"/>
                </svg>
            </button>

            <button class="custom-button"id="COR-MED">
                <!-- Первая SVG-иконка -->       
                <svg width="24" height="24" viewBox="0 0 51 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <!-- Внутренние элементы остаются без изменений -->
                    <rect x="0.5" width="50" height="50" rx="25" fill="#AB77EB"/>
                    <mask id="mask0_4027_382" style="mask-type:luminance" maskUnits="userSpaceOnUse" 
                        x="14" y="14" width="23" height="22">
                        <path d="M25.5 35C31.0228 35 35.5 30.5228 35.5 25C35.5 19.4772 31.0228 15 25.5 
                        15C19.9772 15 15.5 19.4772 15.5 25C15.5 30.5228 19.9772 35 25.5 35Z" 
                        fill="white" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M27 19H24V23.5H19.5V26.5H24V31H27V26.5H31.5V23.5H27V19Z" 
                        fill="black" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </mask>
                    <g mask="url(#mask0_4027_382)">
                        <path d="M13.5 13H37.5V37H13.5V13Z" fill="white"/>
                    </g>
                </svg>
                    
                    
                <!-- Текст кнопки -->
                <span class="button-text">Медицина</span> 
                <!-- Вторая SVG-иконка -->
                <svg class="icon-right" width="24" height="24" viewBox="0 0 31 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="1.125" y="0.625" width="28.75" height="28.75" rx="14.375" stroke="#7527B2" stroke-width="1.25"/>
                    <path d="M20.1161 14.3274L20.1132 14.3248L14.1478 8.73647L14.1432 8.73226L14.1418 8.7311C13.7749 8.40419 
                    13.2289 8.43324 12.8907 8.76051L12.8866 8.76302L12.8857 8.76387L12.8823 8.76723L12.883 8.76796C12.5174 
                    9.10176 12.5154 9.67494 12.8829 10.0382L12.885 10.0403L12.8862 10.0415L12.8884 10.0435L18.1453 
                    14.996L12.8804 19.956L12.8817 19.9574C12.7001 20.1105 12.6074 20.3496 12.6074 20.5897C12.6074 21.0796 
                    13.0121 21.4995 13.5307 21.4995C13.7755 21.4995 13.9909 21.4093 14.1458 21.2575L14.1494 21.254L20.1144 
                    15.637L20.1176 15.634L20.1415 15.6107L20.151 15.6008L20.1535 15.5982C20.4888 15.233 20.4849 14.6591 
                    20.1161 14.3274Z" fill="#7527B2"/>
                </svg>
            </button>


            <button class="custom-button"id="COR-AUTH">
                <!-- Первая SVG-иконка -->       
                <svg width="24" height="24" viewBox="0 0 51 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="0.5" width="50" height="50" rx="25" fill="#7B43F2"/>
                    <path d="M24.8362 15.0372C22.5504 15.2911 20.5889 16.9205 
                    19.8934 19.136C19.6746 19.8354 19.6394 20.2144 19.6394 
                    21.7891V23.227L19.1549 23.2504C18.4086 23.2856 17.9984 
                    23.4419 17.5998 23.8443C17.3458 24.0983 17.2013 24.3523 
                    17.0958 24.7157C17.0254 24.9657 17.0215 25.1533 17.0215 
                    29.1192C17.0215 33.6479 17.0137 33.4681 17.2481 33.9448C17.3849 
                    34.2183 17.803 34.6364 18.0765 34.7732C18.5649 35.0154 18.1156 
                    34.9998 25.5005 34.9998C32.8853 34.9998 32.436 35.0154 32.9244 
                    34.7732C33.1979 34.6364 33.616 34.2183 33.7528 33.9448C33.9872 
                    33.4681 33.9794 33.6479 33.9794 29.1192C33.9794 25.1533 33.9755 
                    24.9657 33.9052 24.7157C33.7997 24.3523 33.6551 24.0983 33.4011 
                    23.8443C33.0026 23.4419 32.5923 23.2856 31.846 23.2504L31.3615 
                    23.227V21.7891C31.3615 20.5465 31.3498 20.2964 31.2872 
                    19.9096C30.7558 16.8189 27.9426 14.6894 24.8362 15.0372ZM26.0436 
                    17.6551C27.2353 17.8465 28.2317 18.7257 28.6302 19.937C28.7162 
                    20.1988 28.7201 20.273 28.7318 21.7226L28.7475 
                    23.2387H25.5005H22.2535L22.2691 21.7226C22.2808 
                    20.273 22.2847 20.1988 22.3707 19.937C22.7106 
                    18.9093 23.4569 18.1318 24.4377 17.7879C24.594 17.7332 
                    24.8128 17.6746 24.9261 17.6551C25.2152 17.6082 25.7505 
                    17.6043 26.0436 17.6551ZM26.1139 25.9777C27.0517 26.2981 
                    27.6104 27.2554 27.4112 28.2088C27.2978 28.7441 26.9032 
                    29.2716 26.4226 29.5295L26.1686 29.6663L26.1569 30.8033L26.1452 
                    31.9403L26.0475 32.081C25.774 32.4796 25.2269 32.4796 24.9534 
                    32.081L24.8557 31.9403L24.844 30.8033L24.8323 29.6663L24.5783 
                    29.5295C23.8125 29.1192 23.3905 28.1854 23.6054 27.3687C23.8047 
                    26.599 24.4064 26.0402 25.1879 25.8957C25.434 25.8488 25.8521 
                    25.8879 26.1139 25.9777Z" fill="white"/>
                    </svg>
                                    
                <!-- Текст кнопки -->
                <span class="button-text">Аутентификатор</span> 
                <!-- Вторая SVG-иконка -->
                <svg class="icon-right" width="24" height="24" viewBox="0 0 31 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="1.125" y="0.625" width="28.75" height="28.75" rx="14.375" stroke="#7527B2" stroke-width="1.25"/>
                    <path d="M20.1161 14.3274L20.1132 14.3248L14.1478 8.73647L14.1432 8.73226L14.1418 8.7311C13.7749 8.40419 
                    13.2289 8.43324 12.8907 8.76051L12.8866 8.76302L12.8857 8.76387L12.8823 8.76723L12.883 8.76796C12.5174 
                    9.10176 12.5154 9.67494 12.8829 10.0382L12.885 10.0403L12.8862 10.0415L12.8884 10.0435L18.1453 
                    14.996L12.8804 19.956L12.8817 19.9574C12.7001 20.1105 12.6074 20.3496 12.6074 20.5897C12.6074 21.0796 
                    13.0121 21.4995 13.5307 21.4995C13.7755 21.4995 13.9909 21.4093 14.1458 21.2575L14.1494 21.254L20.1144 
                    15.637L20.1176 15.634L20.1415 15.6107L20.151 15.6008L20.1535 15.5982C20.4888 15.233 20.4849 14.6591 
                    20.1161 14.3274Z" fill="#7527B2"/>
                </svg>
            </button>

            <button class="custom-button"id="Doctor">
                <!-- Первая SVG-иконка -->       
                <svg width="24" height="24" viewBox="0 0 51 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="0.5" width="50" height="50" rx="25" fill="#F8A441"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M25.75 
                    14C24.2913 14 22.8924 14.5795 21.8609 15.6109C20.8295 
                    16.6424 20.25 18.0413 20.25 19.5C20.25 20.9587 20.8295 
                    22.3576 21.8609 23.3891C22.8924 24.4205 24.2913 25 25.75 
                    25C27.2087 25 28.6076 24.4205 29.6391 23.3891C30.6705 
                    22.3576 31.25 20.9587 31.25 19.5C31.25 18.0413 30.6705 
                    16.6424 29.6391 15.6109C28.6076 14.5795 27.2087 14 25.75 
                    14ZM23 26.375C21.5413 26.375 20.1424 26.9545 19.1109 
                    27.9859C18.0795 29.0174 17.5 30.4163 17.5 31.875V33.25C17.5 
                    33.9793 17.7897 34.6788 18.3055 35.1945C18.8212 35.7103 
                    19.5207 36 20.25 36H31.25C31.9793 36 32.6788 35.7103 33.1945 
                    35.1945C33.7103 34.6788 34 33.9793 34 33.25V31.875C34 30.4163 
                    33.4205 29.0174 32.3891 27.9859C31.3576 26.9545 29.9587 
                    26.375 28.5 26.375H23Z" fill="white"/>
                </svg>
                    
                                    
                <!-- Текст кнопки -->
                <span class="button-text">Мой кабинет</span> 
                <!-- Вторая SVG-иконка -->
                <svg class="icon-right" width="24" height="24" viewBox="0 0 31 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="1.125" y="0.625" width="28.75" height="28.75" rx="14.375" stroke="#7527B2" stroke-width="1.25"/>
                    <path d="M20.1161 14.3274L20.1132 14.3248L14.1478 8.73647L14.1432 8.73226L14.1418 8.7311C13.7749 8.40419 
                    13.2289 8.43324 12.8907 8.76051L12.8866 8.76302L12.8857 8.76387L12.8823 8.76723L12.883 8.76796C12.5174 
                    9.10176 12.5154 9.67494 12.8829 10.0382L12.885 10.0403L12.8862 10.0415L12.8884 10.0435L18.1453 
                    14.996L12.8804 19.956L12.8817 19.9574C12.7001 20.1105 12.6074 20.3496 12.6074 20.5897C12.6074 21.0796 
                    13.0121 21.4995 13.5307 21.4995C13.7755 21.4995 13.9909 21.4093 14.1458 21.2575L14.1494 21.254L20.1144 
                    15.637L20.1176 15.634L20.1415 15.6107L20.151 15.6008L20.1535 15.5982C20.4888 15.233 20.4849 14.6591 
                    20.1161 14.3274Z" fill="#7527B2"/>
                </svg>
            </button>


            <div id="admin-button-container"></div> <!-- Контейнер для кнопки администратора -->
         <!-- Кнопка "Выйти" -->
            <button id="LogOut-btn" type="submit" class="button"> 
            <span data-translate="LogOut-button">Выйти</span>    
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g id="icon / for sections / exit" clip-path="url(#clip0_3512_133)">
                <g id="Vector">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M9.47058 0.147224C9.99184 -0.00914457 10.5424 
                -0.0414919 11.0784 0.052764C11.6144 0.14702 12.1209 0.365268 12.5576 0.690089C12.9942 1.01491 
                13.3488 1.43731 13.5932 1.92356C13.8376 2.40982 13.9649 2.94647 13.965 3.49067V20.5093C13.9649 
                21.0535 13.8376 21.5902 13.5932 22.0764C13.3488 22.5627 12.9942 22.9851 12.5576 23.3099C12.1209 
                23.6347 11.6144 23.853 11.0784 23.9472C10.5424 24.0415 9.99184 24.0091 9.47058 23.8528L2.48809 
                21.758C1.76901 21.5423 1.13862 21.1006 0.690431 20.4983C0.242239 19.896 0.000123112 19.1653 0 
                18.4146V5.58542C0.000123112 4.83468 0.242239 4.10398 0.690431 3.50171C1.13862 2.89944 1.76901 
                2.45768 2.48809 2.24197L9.47058 0.147224ZM15.1287 2.69001C15.1287 2.38137 15.2513 2.08536 15.4696 
                1.86712C15.6878 1.64887 15.9838 1.52627 16.2925 1.52627H19.7837C20.7097 1.52627 21.5977 1.89409 
                22.2524 2.54883C22.9071 3.20356 23.275 4.09157 23.275 5.01751V6.18126C23.275 6.4899 23.1524 
                6.78591 22.9341 7.00415C22.7159 7.2224 22.4199 7.34501 22.1112 7.34501C21.8026 7.34501 21.5066 
                7.2224 21.2883 7.00415C21.0701 6.78591 20.9475 6.4899 20.9475 6.18126V5.01751C20.9475 4.70887 
                20.8249 4.41286 20.6066 4.19462C20.3884 3.97637 20.0924 3.85376 19.7837 3.85376H16.2925C15.9838 
                3.85376 15.6878 3.73115 15.4696 3.51291C15.2513 3.29466 15.1287 2.99866 15.1287 2.69001ZM22.1112 
                16.655C22.4199 16.655 22.7159 16.7776 22.9341 16.9958C23.1524 17.2141 23.275 17.5101 23.275 
                17.8187V18.9825C23.275 19.9084 22.9071 20.7964 22.2524 21.4512C21.5977 22.1059 20.7097 22.4737 
                19.7837 22.4737H16.2925C15.9838 22.4737 15.6878 22.3511 15.4696 22.1329C15.2513 21.9146 15.1287 
                21.6186 15.1287 21.31C15.1287 21.0013 15.2513 20.7053 15.4696 20.4871C15.6878 20.2688 15.9838 
                20.1462 16.2925 20.1462H19.7837C20.0924 20.1462 20.3884 20.0236 20.6066 19.8054C20.8249 19.5871 
                20.9475 19.2911 20.9475 18.9825V17.8187C20.9475 17.5101 21.0701 17.2141 21.2883 16.9958C21.5066 
                16.7776 21.8026 16.655 22.1112 16.655ZM8.14624 10.8363C7.83759 10.8363 7.54159 10.9589 7.32334 
                11.1771C7.1051 11.3954 6.98249 11.6914 6.98249 12C6.98249 12.3086 7.1051 12.6046 7.32334 
                12.8229C7.54159 13.0411 7.83759 13.1637 8.14624 13.1637H8.1474C8.45605 13.1637 8.75205 13.0411 
                8.9703 12.8229C9.18854 12.6046 9.31115 12.3086 9.31115 12C9.31115 11.6914 9.18854 11.3954 8.9703 
                11.1771C8.75205 10.9589 8.45605 10.8363 8.1474 10.8363H8.14624Z" fill="white"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M19.1254 9.01443C19.489 8.65086 20.0785 8.65086 
                20.442 9.01443L22.7695 11.3419C23.1331 11.7055 23.1331 12.295 22.7695 12.6586L20.442 
                14.9861C20.0785 15.3496 19.489 15.3496 19.1254 14.9861C18.7618 14.6225 18.7618 14.033 19.1254 
                13.6694L19.8636 12.9312H16.2925C15.7783 12.9312 15.3615 12.5144 15.3615 12.0002C15.3615 11.4861 
                15.7783 11.0692 16.2925 11.0692H19.8636L19.1254 10.3311C18.7618 9.96749 18.7618 9.37801 19.1254 
                9.01443Z" fill="white"/>
                </g>
                </g>
                <defs>
                <clipPath id="clip0_3512_133">
                <rect width="24" height="24" fill="red"/>
                </clipPath>
                </defs>
              </svg>        
            </button>
            <button id="Sessions" class="link-button" type="button" 
            style=" font-size: 12px;
                    height: 20px;
                    margin-top: -5px;
                    margin-right:150px">Сессии</button>          
    </div>

       
    <!-- Модальное окно -->
    <div id="sessionsModal"class="modal" style="display: none;">  
        <div class="modal-header"> 
            <div class="modal-buttons">
              <button class="modal-button close" data-action="close" onclick="closeModal('sessionsModal')">✖</button>
            </div>
            <h3 style="margin-top: 25px; color:#291161;font-size: 17px;">Информация о сессиях</h3>
        </div> 
      <div class="modal-content"> 
          <div class="cards-scroll-area">
            <div class="cards-container" id="sessionCardsContainer">
              <!-- Карточки -->
            </div>
          </div>
      </div>
    </div>



    <script src="/static/translation.js"></script>  
    <script src="/static/general_fun.js"></script>   
    
        <script>
           const accessToken = new URLSearchParams(window.location.search).get('access_token');
            console.log("accessToken from localStorage:", accessToken);
            document.getElementById('passwordManagerButton').addEventListener('click', function() {
                if (checkToken()) {
                window.location.href = '/static/password_manager.html' + '?access_token=' + accessToken;   }
            });
    
            document.getElementById('COR-AUTH').addEventListener('click', function() {
                if (checkToken()) {
                window.location.href = '/static/medical.html' + '?access_token=' + accessToken;}
            });
    
            // Обработчик для кнопки "COR-Platform"
        document.getElementById('COR-MED').addEventListener('click', function() {
            if (checkToken()) {          
                window.location.href = '/static/medical.html' + '?access_token=' + accessToken;
            } 
        });
        // Обработчик для кнопки "Мой кабинет"
        document.getElementById('Doctor').addEventListener('click', function() {
                    if (checkToken()) {          
                        window.location.href = '/static/doctor_patients_page.html' + '?access_token=' + accessToken;
                    } 
                });




        document.getElementById('LogOut-btn').addEventListener('click', function () {
                // Удаление токенов из localStorage
                localStorage.removeItem('accessToken');
                localStorage.removeItem('refreshToken');
                localStorage.removeItem('isAdmin');
                localStorage.removeItem('redirectUrl');


                // Очистка кэша страницы
                if ('caches' in window) {
                    caches.keys().then(names => {
                        for (let name of names) caches.delete(name);
                    });
                }

                    // Переадресация на страницу login.html
                    window.location.href = '/';
                });


            function toggleQrCode(corId) {
                const qrCodeContainer = document.getElementById('qrCodeContainer');
                if( checkToken()){
                if (qrCodeContainer.style.display === 'block') {
                    // Скрываем QR-код, если он уже отображается
                    qrCodeContainer.style.display = 'none';
                    qrCodeContainer.innerHTML = ''; // Очищаем контейнер
                } else {
                    // Показываем QR-код
                    qrCodeContainer.style.display = 'block';

                    // Очищаем предыдущий QR-код (если есть)
                    qrCodeContainer.innerHTML = '';

                    // Генерация нового QR-кода
                    new QRCode(qrCodeContainer, {
                        text: corId,
                        width: 160,
                        height: 160
                    });
                }}
            }
            async function fetchCorId() {
                const accessToken = new URLSearchParams(window.location.search).get('access_token');
                if (!accessToken) {
                    console.error("Токен доступа не найден.");
                    document.getElementById('userCorId').textContent = "Ошибка: токен не найден.";
                    return;
                }

                try {
                    const response = await fetch('/api/user/my_core_id', {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${accessToken}`
                        }
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        console.error("Ошибка получения COR-ID:", errorData);
                        document.getElementById('userCorId').textContent = "Ошибка получения COR-ID.";
                        return;
                    }

                    const corId = await response.json();
                    const userCorIdElement = document.getElementById('userCorId');
                    userCorIdElement.textContent = `${corId}`;
                     // Jбработчик клика для отображения QR-кода
                     userCorIdElement.addEventListener('click', () => toggleQrCode(corId));
                     // Jбработчик клика на сам QR-код для его скрытия
                    const qrCodeContainer = document.getElementById('qrCodeContainer');
                    qrCodeContainer.addEventListener('click', () => {
                        qrCodeContainer.style.display = 'none'; // Скрываем QR-код
                        qrCodeContainer.innerHTML = ''; // Очищаем контейнер
                    });
                } catch (error) {
                    console.error("Ошибка при запросе COR-ID:", error);
                    document.getElementById('userCorId').textContent = "Ошибка при загрузке COR-ID.";
                }
            }

          //  document.addEventListener('DOMContentLoaded', fetchCorId);
            
            document.addEventListener('DOMContentLoaded', function() {
              checkToken();
              fetchCorId();
              initModalControls('sessionsModal');
              initAllModals();
              makeModalDraggable('sessionsModal');
              enableFetchInterceptor();
              setupTokenCheckOnActions();

            const urlParams = new URLSearchParams(window.location.search);
            const accessToken = urlParams.get('access_token'); // Получаем токен из URL

    if (accessToken) {
        try {
            // Расшифровываем токен
            const decodedToken = decodeToken(accessToken);

            console.log("Decoded token:", decodedToken);

            const isAdmin = decodedToken && Array.isArray(decodedToken.roles) && decodedToken.roles.includes('admin');
            const adminButtonContainer = document.getElementById('admin-button-container');
            adminButtonContainer.innerHTML = '';
            if (isAdmin) {
                const adminButton = document.createElement('button');
                adminButton.innerText = 'Администрирование';
                adminButton.onclick = function() {
                    window.location.href = `/static/admin.html/?access_token=${accessToken}`;
                };
                adminButtonContainer.appendChild(adminButton);
            }
        } catch (error) {
            console.error("Ошибка при расшифровке токена:", error);
        }
    } else {
        console.error("Токен не найден в localStorage.");
    }
});

            const sessionsButton = document.getElementById("Sessions"); // Кнопка "Сессии"
            const modal = document.getElementById("sessionsModal"); // Модальное окно

            // Открываем модальное окно и загружаем данные при клике на кнопку "Сессии"
            sessionsButton.addEventListener("click", async function () {
                modal.style.display = "block"; // Открываем модальное окно
                await getSessions(); // Загружаем данные о сессиях
            });

            makeModalDraggable('sessionsModal');

// Функция для получения данных о сессиях
async function getSessions() {
    try {
        const token = getTokenFromURL();
        const response = await fetch("/api/user/sessions/all?skip=0&limit=150", {
            method: "GET",
            headers: {
                "Authorization": `Bearer ${token}`,
                "Content-Type": "application/json;charset=utf-8"
            }
        });

        if (!response.ok) {
            throw new Error(`Ошибка: ${response.status}`);
        }

        const sessions = await response.json();
        console.log("Список сессий:", sessions);

        const cardsContainer = document.getElementById("sessionCardsContainer");
        cardsContainer.innerHTML = "";

        sessions.forEach(session => {
            const card = document.createElement("div");
            card.className = "session-card";
            card.innerHTML = `
            <div class="card-content">
                <div class="session-text">
                <p><strong>Об устройстве:</strong> ${session.device_info}</p>
                <p><strong>Устройство:</strong> ${session.device_type || "Неизвестно"}, ${session.device_os || "Неизвестно"}</p>
                <p><strong>IP адрес:</strong> ${session.ip_address || "Неизвестно"}</p>
                <p><strong>Даты:</strong> Создана: ${new Date(session.created_at).toLocaleString()}, Обновлена: ${new Date(session.updated_at).toLocaleString()}</p>
                </div>
                <button class="modal-button session-delete-button" data-session-id="${session.id}">✖</button>
            </div>
            `;
            cardsContainer.appendChild(card);
        });

        // Добавляем обработчики событий для кнопок удаления
        document.querySelectorAll('.modal-button.session-delete-button').forEach(button => {
            button.addEventListener('click', async function() {
                const sessionId = this.getAttribute('data-session-id');
                await deleteSession(sessionId);
            });
        });

   // Рассчитываем высоту всех карточек
        const cardsHeight = Array.from(cardsContainer.children).reduce((totalHeight, card) => {
        return totalHeight + card.offsetHeight;}, 0);
        const padding = 40; // Отступы внутри модального окна
        const modal = document.getElementById("sessionsModal");

    } catch (error) {
        console.error("Ошибка при получении сессий:", error);
    }
}

async function deleteSession(sessionId) {
    try {
        const token = getTokenFromURL();
        const response = await fetch(`/api/user/sessions/${sessionId}`, {
            method: "DELETE",
            headers: {
                "Authorization": `Bearer ${token}`,
                "Content-Type": "application/json;charset=utf-8"
            }
        });

        if (!response.ok) {
            throw new Error(`Ошибка: ${response.status}`);
        }

        const result = await response.json();
        console.log("Сессия удалена:", result);
        
        // Обновляем список сессий после удаления
        await getSessions();
        
        // Можно добавить уведомление об успешном удалении
        alert("Сессия успешно удалена");
        
    } catch (error) {
        console.error("Ошибка при удалении сессии:", error);
        alert("Не удалось удалить сессию: " + error.message);
    }
}


        </script>
    </body>
    </html>
    